<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Film Terminal</title>
    <script src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <body>

    <!---------------    ROW ONE BGN   --------------->
    <div>

      <div id="topbar">

        <div id="topbar-text">FILM TERMINAL</div>

      </div>

      <div id="toprow">


    <!---------------    COL ONE BGN   --------------->
        <div id="column" class="top-left-home">

          <div class="holder" style="background-color: #140f1c;"></div>
          
        </div>
    <!---------------    COL ONE END   --------------->
        


    <!---------------    COL TWO BGN   --------------->
        <div id="column" class="top-middle-home">

          <div class="holder" style="background-color: #140f1c;"><p class="welcome">Welcome to the film terminal!  Search for any film by entering it's title or keywords below!</p></div>
          <div class="holder" style="background-color: #140f1c;">
            <button class="theSearchButton" id="searchButton">SEARCH</button>
            <br>
            <input name="searchTxt" type="text" maxlength="512" id="searchTxt" class="searchField"/>
          </div>
          <div class="holder" style="background-color: #140f1c;"></div>

        </div>
    <!---------------    COL TWO END    --------------->



    <!---------------    COL TRE BGN   --------------->
        <div id="column" class="top-right-home">

          <div class="holder" style="background-color: #140f1c;"></div>

        </div>
    <!---------------    COL TRE END   --------------->




      </div>

    </div>
    <!---------------    ROW ONE END   --------------->







    <!---------------    ROW TWO BGN   --------------->
    <div>

      <div id="bottomrow">
      



    <!---------------    COL ONE BGN   --------------->
        <div id="column" class="bottom-left-home">

          <div class="holder">
            <p id="tile-one"></p>
          </div>
          <div class="holder">
            <p id="tile-two"></p>
          </div>
          <div class="holder">
            <p id="tile-three"></p>
          </div>
          
        </div>
    <!---------------    COL ONE END   --------------->
        


    <!---------------    COL TWO BGN   --------------->
        <div id="column" class="bottom-middle-home">

          <div class="holder">
            <p id="tile-four"></p>
          </div>
          <div class="holder">
            <p id="tile-five"></p>
          </div>

        </div>
    <!---------------    COL TWO END    --------------->



    <!---------------    COL TRE BGN   --------------->
        <div id="column" class="bottom-right-home">

          <div class="holder">
            <p id="tile-six"></p>
          </div>

        </div>
    <!---------------    COL TRE END   --------------->




      </div>

    </div>
    <!---------------    ROW TWO END   --------------->



  <script>

      let button = document.getElementById("searchButton");

      button.onclick = function() {
        
       window.location.href = "#tile-one";

        
        let displayAge = document.getElementById("tile-one");
        let displayRuntime = document.getElementById("tile-two");
        let displayScore = document.getElementById("tile-three");
        let displayTitle = document.getElementById("tile-four");
        let displayPoster = document.getElementById("tile-five");
        let displayDesc = document.getElementById("tile-six");
   
        let identity = 0;
        let movieString = "";

        let search = document.getElementById("searchTxt").value;
         




        $(document).ready(function() { 
            $.getJSON('https://api.themoviedb.org/3/search/movie?api_key=2030a06705f03dfab4619a3ce26aa59a&query=' + search, function(data) { 

                let dataSource = data.results;
                
    
                  identity = dataSource[0].id;


          const options = {
            method: 'GET',
            headers: {
              'X-RapidAPI-Key': 'a47eff13c7msh96ed51f633f9451p10d262jsnce8793613062',
              'X-RapidAPI-Host': 'streaming-availability.p.rapidapi.com'
            }
          };

          var obj;

          fetch('https://streaming-availability.p.rapidapi.com/get/basic?country=us&tmdb_id=movie%2F' + identity + '&output_language=en', options)
            .then(res => res.json())
            .then(data => {
              obj = data;
            })
            .then(() => {
              console.log(obj);
          //displayAge.innerHTML = obj.originalTitle; 
          displayAge.innerHTML = obj.originalTitle; 
          displayRuntime.innerHTML = "<p><span class='cursive'>Runtime:</span> " + obj.runtime + " minutes</p><br> " + " <p><span class='cursive'>Release year:</span> " + obj.year + "</p>";
          displayScore.innerHTML = "<span class='cursive'>" + obj.imdbVoteCount + "</span>" + " users on IMDb rated this film an average of " + "<span class='cursive'>" + obj.imdbRating + "</span>"; 
          displayTitle.innerHTML = "<span class='cursive'>Cast</span>" + "<br><br>" + obj.cast[0] + "<br>" + obj.cast[1] + "<br>" + obj.cast[2] + "<br>" + obj.cast[3] + "<br>" + obj.cast[4] + "<br>" + obj.cast[5];
          displayPoster.innerHTML = "<img src='" + obj.posterURLs.original + "'>";
          displayDesc.innerHTML = "<p><span class='cursive'>Overview</span><br><br>" + obj.overview + "</p>";
             });

 

          
          

       
        } 
        );



         
    }); 

      }
        
       
       

        

</script>
  </body>

</html>
